import{D as B}from"./index.es.6ylGfXNC.js";import{ao as $,h as z,d as Z,p as u,v as D,x as R,c as C,o as P,j as x,K as j,k as g,_ as w}from"./framework.DylzA-Fb.js";function I(l){const t=$({x:0,y:0,z:0,scale:1,...l});return[z(()=>{const{x:n,y:e,z:s,scale:o,stop:d,...r}=t;return{transform:`translate3d(${t.x}px, ${t.y}px, ${t.z}px) scale(${t.scale})
        ${t.rotateZ?"rotateZ("+t.rotateZ+"deg)":""}`,...r,transition:d?"none":"0.2s linear"}}),{set:n=>{n.stop=!1;for(const e in n)n[e]!==void 0&&(t[e]=n[e])},start:n=>{n.stop=!0;for(const e in n)n[e]!==void 0&&(t[e]=n[e])}},t]}const K={class:"flex fill center container"},M=Z({__name:"app",setup(l){u(null);const t=u(null);u({x:0,y:0});const[f,i,c]=I({x:0,y:0,s:1,z:0}),n=B({onDrag:({pinching:s,cancel:o,offset:[d,r],...p})=>{if(s)return o();i.start({x:d,y:r})},onPinch:({origin:[s,o],first:d,movement:[r],offset:[p,v],memo:a})=>{if(d){const{width:h,height:m,x:E,y:k}=t.value.getBoundingClientRect(),L=s-(E+h/2),b=o-(k+m/2);a=[c.x,c.y,L,b]}const y=a[0]-(r-1)*a[2],_=a[1]-(r-1)*a[3];return i.set({scale:p,rotateZ:v,x:y,y:_}),a}},{drag:{from:()=>[c.x,c.y]},pinch:{scaleBounds:{min:.5,max:2},rubberband:!0}}),e=s=>{s.preventDefault(),console.log(s)};return D(()=>{document.addEventListener("gesturestart",e),document.addEventListener("gesturechange",e),document.addEventListener("gestureend",e)}),R(()=>{document.removeEventListener("gesturestart",e),document.removeEventListener("gesturechange",e),document.removeEventListener("gestureend",e)}),(s,o)=>(P(),C("div",K,[o[0]||(o[0]=x("p",{class:"text"},"功能说明：拖拽移动、手势放大、缩小、旋转",-1)),x("div",j(g(n)(),{class:"card",ref_key:"dragRef",ref:t,style:g(f)}),null,16)]))}}),U=w(M,[["__scopeId","data-v-ab22962f"]]);export{U as default};
